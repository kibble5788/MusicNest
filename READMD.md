# MP3播放器应用技术架构

## 核心技术栈

1. **前端框架**：
   - Next.js 15 (基于React 19)
   - TypeScript 作为主要开发语言

2. **UI 组件库**：
   - Radix UI 作为底层无样式组件库
   - shadcn/ui 作为高级组件系统
   - Tailwind CSS 用于样式设计
   - 支持暗色主题（通过next-themes实现）

3. **状态管理**：
   - React Context API 实现全局状态管理
   - 主要上下文包括：
     - MusicContext：音乐播放、队列和收藏管理
     - AuthContext：用户认证相关
     - ToastContext：通知提示系统

4. **数据存储**：
   - 本地存储（LocalStorage）保存用户首选项和播放历史
   - 模拟API数据（mock-data）用于开发环境

5. **HTTP 请求**：
   - Axios 用于网络请求处理

## 应用架构

1. **布局结构**：
   - Next.js App Router 页面路由系统
   - 分离的布局组件：RootLayout 和 ClientLayout
   - 全局音频元素单例设计

2. **核心功能模块**：
   - 音乐播放器（支持基础播放控制功能）
   - 播放列表管理
   - 歌曲收藏功能
   - 最近播放记录
   - 同时支持音乐和有声书两种内容类型
   - 聚合搜索功能

3. **组件结构**：
   - UI组件：基于shadcn/ui和Radix UI的基础UI元素
   - 功能组件：MusicPlayer、AudiobookPlayer、SongCard等
   - 骨架屏(Skeletons)用于加载状态显示

4. **音频处理**：
   - 全局单例音频元素避免重复创建
   - 统一的播放控制接口
   - 进度条和时间显示
   - 播放错误处理

## 特色功能

1. **双内容支持**：
   - 音乐播放功能
   - 有声书播放功能，支持章节管理
   - 内容类型自动切换

2. **数据管理**：
   - 收藏歌曲本地存储
   - 播放历史记录
   - 播放队列管理

3. **用户体验**：
   - 响应式设计，适配移动设备
   - 虚拟列表(VirtualList)高效渲染大量内容
   - 平滑过渡动画
   - Toast消息通知系统

4. **离线功能**：
   - 本地数据持久化
   - 模拟API数据支持离线开发

## 开发特性

1. **性能优化**：
   - React.memo 减少不必要的渲染
   - 防抖和节流处理用户输入
   - 延迟加载非关键资源

2. **开发工具**：
   - ESLint 代码质量检查
   - TypeScript 类型系统
   - Next.js 开发工具链
   - Tailwind 样式系统

3. **模拟数据**：
   - 丰富的模拟API响应
   - 模拟用户数据和播放列表
   - 随机生成的测试内容
 
